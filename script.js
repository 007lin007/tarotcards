// 日期設定
const today = new Date();
const year = today.getFullYear();
const month = today.getMonth() + 1;
const day = today.getDate();
const todayKey = `${year}-${month}-${day}`;
const dayOfYear = Math.floor((today - new Date(year, 0, 0)) / 86400000);

// 每日代碼表
const dailyCodes = {
  "2025-4-28": "M4X9B2",
  "2025-4-29": "Z8C1A5",
  "2025-4-30": "R7D2K8",
  "2025-5-1":  "H5Q4Z1",
  "2025-5-2":  "T9J3M6",
  "2025-5-3":  "P6A7L4",
  "2025-5-4":  "W3N8X7"
};

const universalCode = "FREEPASS";

// 塔羅牌資料
const tarotCards = [
  { name: "愚者", description: "今天是探索與自由的開始，勇敢前進吧。" },
  { name: "魔術師", description: "掌握手中的資源，今天適合主動創造機會。" },
  { name: "女祭司", description: "內在智慧引導你，今天適合傾聽直覺。" }
];

// 新版代碼驗證
function verifyCode(inputCode) {
  const inputUpper = inputCode.toUpperCase();

  if (inputUpper === universalCode) {
    return "freepass";
  }

  const todayCode = dailyCodes[todayKey];
  const todayCodeUpper = todayCode ? todayCode.toUpperCase() : "";
  const hasUsed = localStorage.getItem('codeUsed_' + todayKey);

  if (inputUpper === todayCodeUpper && !hasUsed) {
    localStorage.setItem('codeUsed_' + todayKey, 'true');
    return "todaypass";
  }

  return "fail";
}

// 新版抽塔羅牌流程
function drawCard() {
  const code = document.getElementById("codeInput").value.trim();
  const cardContainer = document.getElementById("cardContainer");
  const resultDiv = document.getElementById("cardResult");
  const zodiacSection = document.getElementById("zodiacSection");

  const verifyResult = verifyCode(code);

  if (verifyResult === "fail") {
    resultDiv.innerHTML = "<p style='color:red;'>❌ 無效或已使用過的代碼，請確認！</p>";
    return;
  }

  const card = tarotCards[Math.floor(Math.random() * tarotCards.length)];
  cardContainer.innerHTML = `
    <div class="card">
      <div class="date-label">${year}年${month}月${day}日</div>
      <h3>🃏 ${card.name}</h3>
      <p>${card.description}</p>
    </div>
  `;
  zodiacSection.style.display = "block";
}

// 顯示星座運勢
function showZodiacFortune() {
  const zodiacInput = document.getElementById("zodiacInput").value.trim();
  const fortuneResult = document.getElementById("fortuneResult");

  if (!zodiacFortunes[zodiacInput]) {
    fortuneResult.innerHTML = "<p style='color:red;'>❌ 請輸入正確的中文星座（例如：獅子座）</p>";
    return;
  }

  const fortuneList = zodiacFortunes[zodiacInput];
  const todayIndex = (dayOfYear - 1) % fortuneList.length;

  fortuneResult.innerHTML = `
    <div class="card">
      <div class="date-label">${year}年${month}月${day}日 今日運勢</div>
      <h3>🔮 ${zodiacInput} - 今日指引</h3>
      <p>${fortuneList[todayIndex]}</p>
    </div>
  `;
}

// 星座運勢資料

const zodiacFortunes = {
 "牡羊座": [
  "今天展現勇氣，迎向挑戰。",
  "冒險精神旺盛，適合新嘗試。",
  "果斷行動，成就自我。",
  "主動出擊，突破困境。",
  "充滿活力，適合積極拓展。",
  "不怕失敗，持續前進。",
  "自信是今天的關鍵武器。",
  "堅持信念，勇往直前。",
  "新的旅程即將開啟。",
  "今日適合展現領導力。",
  "直覺敏銳，信任自己。",
  "保持熱情，激發潛能。",
  "勇敢擁抱改變。",
  "適合嘗試新的挑戰。",
  "今天是行動力爆發的一天。",
  "堅持理想，不輕言放棄。",
  "適合冒險與探索。",
  "善用能量突破限制。",
  "相信自己，創造奇蹟。",
  "今天適合挑戰極限。",
  "帶著決心邁步前行。",
  "堅定目標，勇敢實踐。",
  "新的機會就在眼前。",
  "積極行動，開創新局。",
  "適合展現真實自我。",
  "果斷決策，掌握主導權。",
  "保持自信，不畏艱難。",
  "今天充滿無限可能。",
  "以熱情面對每個挑戰。",
  "跨出舒適圈，成就非凡。"
]

  "金牛座": [
  "穩扎穩打，穩步前行。",
  "適合規劃長期目標。",
  "耐心是今日的關鍵。",
  "堅持自己的節奏。",
  "今日宜務實行事。",
  "守護已有成果。",
  "適合細水長流的努力。",
  "慢慢累積，穩定成長。",
  "注重細節，避免失誤。",
  "堅持到底，收穫豐碩。",
  "適合理財與資源管理。",
  "專注完成既定目標。",
  "保持冷靜，從容應對挑戰。",
  "穩定情緒，踏實向前。",
  "務實態度帶來成功。",
  "適合培養新技能。",
  "今天適合整理生活細節。",
  "腳踏實地最為重要。",
  "堅守價值，堅定信念。",
  "穩中求進，成果可期。",
  "今日適合耐心耕耘。",
  "持續努力，厚積薄發。",
  "維持自律，收穫豐厚。",
  "享受穩定帶來的幸福感。",
  "適合緩慢卻穩定地推進

  "雙子座": [
  "今天適合靈活應對各種變化。",
  "用好奇心打開新大門。",
  "今天適合溝通交流，分享想法。",
  "以輕鬆心態面對生活的小挑戰。",
  "今天適合學習新技能或知識。",
  "擁抱多變，讓生活更精彩。",
  "今天適合跟不同背景的人交流。",
  "用機智化解小衝突。",
  "今天適合發掘新的興趣愛好。",
  "善用今天靈活思維的優勢。",
  "適合調整心態，適應新局。",
  "今天適合保持彈性，順勢而為。",
  "用輕鬆方式處理棘手問題。",
  "今天適合拓展視野，嘗試新領域。",
  "勇於表達自己的想法與創意。",
  "今天適合建立新的連結與合作。",
  "多問多學，今天特別適合成長。",
  "保持心靈的開放與活力。",
  "今天適合多參與有趣的交流活動。",
  "用聰明機智打開僵局。",
  "今天適合激發創意靈感。",
  "快速學習，是今天的強項。",
  "今天適合轉換角度，看見不同可能。",
  "用樂觀態度迎接小波折。",
  "今天適合接受新資訊，更新自己。",
  "多思考少抱怨，問題自然解決。",
  "今天適合安排多元的行程。",
  "用彈性思維應對不可預期的事。",
  "今天適合輕鬆擴大朋友圈。",
  "相信自己的適應力，一切順利前行。"
],

 "巨蟹座": [
  "今天適合關懷自己與親近的人。",
  "用溫暖態度處理人際關係。",
  "今天適合傾聽內心真正的需求。",
  "照顧好自己的情緒，是今天的課題。",
  "今天適合整理過去的情感包袱。",
  "建立情感上的安全感。",
  "今天適合修復一段重要關係。",
  "用溫柔力量帶動周圍的人。",
  "今天適合創造一個溫暖的環境。",
  "用耐心包容不同的意見。",
  "今天適合規劃家庭或個人生活。",
  "珍惜與家人朋友的連結。",
  "今天適合治癒過去的小傷痛。",
  "信任直覺，今天特別靈敏。",
  "以溫柔姿態迎接世界的回應。",
  "今天適合展現真情與真誠。",
  "用感恩心態面對今日挑戰。",
  "今天適合給自己一些柔軟的時間。",
  "適合沉澱思緒，聽見內在聲音。",
  "今天適合建立心靈的避風港。",
  "多花時間與自己對話。",
  "今天適合溫和地處理誤解。",
  "保持情感的穩定，事情自然而然順利。",
  "今天適合投入到有愛的事物中。",
  "放下對過去的執著，迎接新的幸福。",
  "今天適合展現真誠與關愛。",
  "給自己和別人多一點理解與包容。",
  "以溫柔守護自己的夢想。",
  "今天適合好好休息，恢復能量。",
  "相信柔軟才是最大的力量。"
],

  "獅子座": [
  "今天勇敢表達你的想法，將會贏得認同。",
  "今天適合主動出擊，展示自信的一面。",
  "專注在自己最熱愛的事情上，會有意想不到的收穫。",
  "別怕失敗，每個小錯誤都是成長的禮物。",
  "今天微笑面對困難，會讓你更強大。",
  "適合整理生活，讓空間和心靈都更清新。",
  "相信直覺，今天靈感特別強烈。",
  "主動關心朋友，友情會更深厚。",
  "適合做新嘗試，勇敢踏出舒適圈。",
  "今天適合規劃未來，訂下新目標。",
  "溫柔對待自己，也是一種成長。",
  "今天適合展現領導才能，大家會願意跟隨你。",
  "做事謹慎一點，小細節會帶來大成功。",
  "適合思考財務規劃，未來更有保障。",
  "今天保持耐心，成果會慢慢顯現。",
  "接受自己的不完美，就是最美的力量。",
  "適合分享想法，意外得到貴人幫助。",
  "今天靜下心來，聽聽內心真正的聲音。",
  "適合做運動，釋放壓力。",
  "別害怕改變，新環境會帶來新機會。",
  "用正面的態度面對挑戰，一切會變得更順利。",
  "今天適合閱讀或學習新知識。",
  "小心不要太衝動，三思而後行會更好。",
  "適合種下新的夢想種子，慢慢灌溉。",
  "用行動證明自己的實力，別光說不做。",
  "適合整理人際圈，留下真正重要的人。",
  "今天靜靜充電，準備迎接新的挑戰。",
  "不要小看自己的影響力，你比想像中更有力量。",
  "今天適合展現幽默感，讓氣氛更輕鬆。",
  "堅持自己的信念，未來會給你回報。"
],

  "處女座": [
  "今天適合細心整理生活細節，讓一切更有條理。",
  "面對挑戰時，冷靜與智慧是你的最大武器。",
  "專注於當下的小事，成功自然累積。",
  "今天適合規劃未來，訂定實際可行的目標。",
  "與其擔心，不如行動，今日行動力大增。",
  "細膩的觀察會帶來重要的突破。",
  "保持開放心態，接受不同意見，成長更快。",
  "今天適合花時間充實自我，提升技能。",
  "耐心傾聽，比急著表達更有力量。",
  "細節決定成敗，今天特別留意小地方。",
  "做自己認為正確的事，不必在意他人眼光。",
  "適合審視自己的健康與生活習慣。",
  "相信努力的累積，今天的堅持會有回報。",
  "接受不完美，放下過度的自我要求。",
  "今天適合清理心靈，釋放負面情緒。",
  "保持謙虛，是今天的幸運秘訣。",
  "小小善意的舉動，會有意想不到的回報。",
  "用理性而溫柔的方式解決衝突。",
  "今天適合獨立完成重要任務。",
  "溫和而堅定地走自己的路。",
  "相信直覺，今天的感覺特別敏銳。",
  "今天適合給自己一點小小的獎勵。",
  "專注於個人成長，勝過比較與競爭。",
  "輕鬆看待失誤，把它當成學習機會。",
  "今天適合種下一個小小的夢想。",
  "心存感激，今天的你特別有吸引力。",
  "慢下腳步，才能看清方向。",
  "今天適合結束一段無效的習慣。",
  "耐心灌溉夢想的種子，很快就會發芽。",
  "相信自己是值得被愛、被肯定的。"
],

 "天秤座": [
  "今天適合平衡工作與休息，保持身心健康。",
  "與人合作能帶來更多機會。",
  "保持冷靜，理性思考帶來好結果。",
  "適合表達你的想法與感受。",
  "今天適合修補一段關係。",
  "和諧是今天最重要的主題。",
  "多傾聽，少爭辯，容易得到支持。",
  "今天適合做決定，別再猶豫。",
  "以溫柔堅定的態度說出你的立場。",
  "今天適合欣賞藝術，提升靈感。",
  "給自己一段獨處的時間，整理內心。",
  "適合拓展人脈，結識新朋友。",
  "今天以和平取勝，避免正面衝突。",
  "別為小事生氣，保持微笑。",
  "適合做出一個重要且正確的選擇。",
  "用優雅態度處理突發狀況。",
  "主動表達感謝，讓關係更溫暖。",
  "今天適合重新審視合作關係。",
  "保持心情愉快，幸運會跟隨你。",
  "今天適合完成之前未解的事情。",
  "適合討論未來計劃，制定新目標。",
  "用理解代替指責，事情會更順利。",
  "溫和但堅定地守護自己的界線。",
  "今天適合種下一個新希望。",
  "多給自己一些讚美，提升自信。",
  "今天適合放下心中過多的顧慮。",
  "保持輕鬆，事情會自然而然解決。",
  "適合學習新技能，增強競爭力。",
  "專注當下，美好自然展現。",
  "今天適合訂一個小小的心願。"
],

  "天蠍座": [
  "今天適合專心完成重要任務。",
  "用真誠打動他人，收穫信任。",
  "保持低調行事，效果更佳。",
  "適合深入思考，找到真正想要的答案。",
  "今天適合展現堅韌不拔的一面。",
  "冷靜面對挑戰，別急躁。",
  "今天適合釋放壓力，給自己喘息空間。",
  "信任自己的直覺，選擇正確方向。",
  "今天適合保護自己的情緒。",
  "善用觀察力，察覺重要細節。",
  "今天適合悄悄累積實力，等待爆發。",
  "適合做深度學習，提升自我價值。",
  "以行動證明你的決心。",
  "今天適合改善人際關係，解開誤會。",
  "適合保護個人隱私，保持神秘感。",
  "今天適合秘密策劃未來藍圖。",
  "內心堅定，今天能排除萬難。",
  "今天適合面對恐懼，並超越它。",
  "掌握節奏，穩步前進。",
  "善用今天的深層情感力量。",
  "今天適合勇敢地說出心底話。",
  "守護好自己的夢想，不受外界干擾。",
  "今天適合放手一段過時的執著。",
  "善於洞察人心，是你今天的優勢。",
  "今天適合自我療癒，修補內在裂縫。",
  "保持冷靜，勝過一切衝動反應。",
  "今天適合展現你的專業與深度。",
  "面對真相，勇敢接受內心的力量。",
  "今天適合釋懷過去，輕裝上路。",
  "相信重生的力量，今天是新的開始。"
],

  "射手座": [
  "今天適合探索新事物，開啟冒險精神。",
  "用樂觀態度面對挑戰，一切變得容易。",
  "今天適合拓展眼界，吸收新知。",
  "帶著好奇心行動，會有意外驚喜。",
  "相信直覺，選擇一條新路。",
  "今天適合分享你的熱情與夢想。",
  "用行動展現自由精神。",
  "今天適合嘗試一個小小的冒險。",
  "心胸開闊，幸運自然來到。",
  "適合制定一個新的目標，邁向遠方。",
  "今天保持幽默感，讓自己與他人更開心。",
  "擁抱變化，生活因此精彩。",
  "今天適合突破框架，打破限制。",
  "帶著信任去遇見新夥伴。",
  "今天適合設定一個旅行的計畫。",
  "以開放態度面對不同意見。",
  "今天適合勇敢提出自己的新想法。",
  "享受每一個小小進步的過程。",
  "相信未來會更好，保持前進的力量。",
  "今天適合敞開心扉，迎接新挑戰。",
  "保持彈性，事情自然流動。",
  "用樂觀能量感染周圍的人。",
  "今天適合放下擔憂，專注享受當下。",
  "適合規劃新的冒險旅程。",
  "今天擁有強大學習力，適合提升自我。",
  "帶著好奇心探索未知世界。",
  "今天適合接受新的機會。",
  "信念堅定，就能突破困境。",
  "用微笑面對改變，將會收穫更多。",
  "相信遠方有更好的風景在等你。"
],

  "摩羯座": [
  "今天適合踏實地完成一項重要任務。",
  "以務實態度面對今天的挑戰。",
  "細心規劃，今天的努力未來會有大收穫。",
  "適合訂立明確目標，穩步向前。",
  "今天適合做長期規劃。",
  "耐心堅持，是今天的幸運密碼。",
  "專注當下的工作，收穫成倍成長。",
  "不要害怕慢，只要方向正確就好。",
  "今天適合穩重而自信地展現專業能力。",
  "用行動證明自己的價值。",
  "今天適合堅定內心信念，不受外界干擾。",
  "保持自律，未來的自己會感謝你。",
  "適合默默努力，成果會超越預期。",
  "今天適合累積資源，為未來鋪路。",
  "堅守原則，今天會有意想不到的好消息。",
  "今天適合為夢想種下第一顆種子。",
  "用踏實的腳步，一步步靠近目標。",
  "今天適合默默耕耘，等待收成的時刻。",
  "認真對待每一件小事，會有大成就。",
  "今天適合改善工作習慣，提升效率。",
  "用實際行動證明自己的價值。",
  "今天適合整理財務或資源規劃。",
  "以冷靜理智處理今天的挑戰。",
  "今天適合耐心等待機會到來。",
  "持續努力，成果在路上。",
  "今天適合充實自己，提升實力。",
  "相信厚積薄發的力量。",
  "今天適合一步步邁向心中的高峰。",
  "用心去耕耘，每個小努力都不會白費。",
  "堅持初心，成功指日可待。"
],

  "水瓶座": [
  "今天適合勇敢做自己，不必迎合他人。",
  "適合嘗試新奇的點子，啟動創造力。",
  "保持開放心態，今天會有新驚喜。",
  "今天適合打破舊規則，探索新可能。",
  "分享你的創意，可能引來貴人。",
  "用創新思維解決問題，效果更好。",
  "今天適合認識不同領域的人。",
  "保持彈性，意外的變化會帶來好事。",
  "以開放心態接受不同意見。",
  "今天適合為未來制定特別的計畫。",
  "跟隨靈感走，今天靈光一閃特別多。",
  "用獨特的方式表達自我。",
  "今天適合打破限制，追求內心的自由。",
  "好奇心是你今天的最大財富。",
  "今天適合主動學習科技或新知識。",
  "堅持自己的理念，同時尊重不同聲音。",
  "今天適合把天馬行空的想法變成現實。",
  "以創意解決今天的小挑戰。",
  "適合開啟新的合作或團隊計畫。",
  "敢於與眾不同，是今天的優勢。",
  "今天適合推進創新計劃。",
  "接受今天的不確定性，享受變化。",
  "適合釋放壓力，讓心靈自由呼吸。",
  "用新觀點看待舊問題。",
  "今天適合敞開心胸迎接新朋友。",
  "信任自己的獨特之處。",
  "用輕鬆的態度面對生活的波動。",
  "今天適合分享理想，點燃更多人的熱情。",
  "勇敢追尋自己的獨特之路。",
  "堅持做真實的自己，這就是最好的祝福。"
],

  "雙魚座": [
  "今天適合相信直覺，靈感滿滿。",
  "以溫柔的力量解決問題。",
  "今天適合花時間照顧自己的內心。",
  "適合用想像力描繪未來藍圖。",
  "相信夢想的力量，今天種下希望。",
  "今天適合療癒內心深處的小傷口。",
  "用愛與同理心對待自己和他人。",
  "今天適合沉浸於音樂、藝術或美好事物。",
  "放下執念，迎接新的幸福。",
  "今天適合做一個溫暖的小善行。",
  "相信奇蹟，今天特別容易發生美好事。",
  "適合靜心冥想，整理混亂的思緒。",
  "今天適合重新連結內心的夢想。",
  "用溫柔堅定的步伐前行。",
  "今天適合好好休息，讓能量重生。",
  "適合寫下心願清單，種下希望。",
  "今天適合放慢步調，聆聽自己的心。",
  "以柔軟的態度處理棘手問題。",
  "今天適合擁抱自己的情緒。",
  "與大自然連結，汲取新能量。",
  "今天適合感恩已有的幸福。",
  "用溫柔療癒內在的焦慮。",
  "今天適合整理自己的夢想清單。",
  "相信愛與信念會帶來改變。",
  "適合向宇宙許下一個小願望。",
  "今天適合療癒人際關係。",
  "以真誠面對生活中的一切挑戰。",
  "今天適合專注於心靈的成長。",
  "擁抱自己的脆弱，也是力量的展現。",
  "相信美好的未來正在靠近。"
],

};
